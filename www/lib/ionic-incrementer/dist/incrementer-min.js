angular.module("incrementer",[]).directive("incrementer",["$timeout","$interval","$rootScope",function(e,n,t){"use strict";var a=function(e,n){var t={min:0,max:200,step:1,prefix:void 0,postfix:void 0,decimals:0,stepInterval:200,stepIntervalDelay:200,initval:"",swipeInterval:100,incrementerName:""};angular.forEach(t,function(t,a){e[a]=n.hasOwnProperty(a)?n[a]:t}),e.val=n.value||e.initval};return{restrict:"EA",require:"?ngModel",scope:!0,replace:!0,link:function(i,r,l,o){a(i,l);var s,c,p,u,v=i.val;o.$setViewValue(i.val),i.decrement=function(){v=i.val;var e=parseFloat(parseFloat(Number(i.val))-parseFloat(i.step)).toFixed(i.decimals);return e<parseInt(i.min)?(e=parseFloat(i.min).toFixed(i.decimals),i.val=e,void o.$setViewValue(e)):(i.val=e,void o.$setViewValue(e))},t.$on("autoIncrement",function(e,n){n.incrementerName==i.incrementerName&&(i.val=n.value.toString())}),i.increment=function(){v=i.val;var e=parseFloat(parseFloat(Number(i.val))+parseFloat(i.step)).toFixed(i.decimals);e>parseInt(i.max)||(i.val=e,o.$setViewValue(e))},i.startSpinUp=function(t){if(t){if(p)return;p=!0,console.log(i.swipeInterval),e(function(){p=!1},i.swipeInterval)}i.checkValue(),i.increment(),u=Date.now(),i.stopSpin(),t||e(function(){c=n(function(){i.increment()},i.stepInterval)},i.stepIntervalDelay)},i.startSpinDown=function(t){if(t){if(p)return;p=!0,e(function(){p=!1},i.swipeInterval)}if(i.checkValue(),i.decrement(),u=Date.now(),!t){e(function(){c=n(function(){i.decrement()},i.stepInterval)},i.stepIntervalDelay)}},i.stopSpin=function(){Date.now()-u>i.stepIntervalDelay?(e.cancel(s),n.cancel(c)):e(function(){e.cancel(s),n.cancel(c)},i.stepIntervalDelay)},i.checkValue=function(){var e;""===i.val||i.val.match(/^-?(?:\d+|\d*\.\d+)$/i)||(e=""!==v?parseFloat(v).toFixed(i.decimals):parseFloat(i.min).toFixed(i.decimals),i.val=e,o.$setViewValue(e))}},template:'<div class="incrementer"><div class="row incrementer-row"><a class="button button-icon minus" on-touch="startSpinDown()" on-release="stopSpin()">-</a><span class="prefix" ng-show="prefix" ng-bind="prefix"></span><div class="input-container" on-drag-right="startSpinUp(true)" on-drag-left="startSpinDown(true)" on-release="stopSpin(true)"><span ng-model="val" class="incrementer-value" ng-blur="checkValue()">{{val}}</span><span class="postfix" ng-show="postfix" ng-bind="postfix"></span></div><a class="button button-icon plus" on-touch="startSpinUp()" on-release="stopSpin()">+</a></div></div>'}}]);
angular.module("timeincrementer",[]).directive("timeincrementer",["$timeout","$interval","$rootScope",function(n,i,e){"use strict";var t=function(n,i){var e={min:0,max:200,min2:0,max2:60,step:1,initminute:"0",prefix:void 0,postfix:void 0,postfix2:"m",decimals:0,stepInterval:200,stepIntervalDelay:600,inithour:"",infinity:!1,allowzero:!1,imgpath:"",initialSelection:"hours",minuteTransition:!0,swipeInterval:100,timeIncrementerName:""};angular.forEach(e,function(e,t){n[t]=i.hasOwnProperty(t)?i[t]:e}),n.val=i.value||n.inithour};return{restrict:"EA",require:"ngModel",scope:{onItemChange:"&"},replace:!0,link:function(a,s,r,o){t(a,r);var l,u,m,c,p=a.val,f=a.initminute,v=a.min2;"minutes"!==a.initialSelection?a.view="hours":a.view=a.initialSelection;var d={hours:a.val,minutes:a.initminute};o.$setViewValue(d),o.$render(),a.toggleView=function(n){a.view=n},e.$on("autoIncrementTime",function(n,i){a.timeIncrementerName==i.timeIncrementerName&&(a.val=i.value.hours.toString(),a.initminute=i.value.minutes.toString())}),a.decrement=function(){if("hours"==a.view){p=a.val;var n=parseFloat(parseFloat(Number(a.val))-parseFloat(a.step)).toFixed(a.decimals);if(0!=n||a.allowzero?a.min2=parseInt(v):(a.min2=1,0===parseInt(a.initminute)&&(a.initminute="1",a.refreshModels(a.val,a.initminute))),n<parseInt(a.min))return n=parseFloat(a.min).toFixed(a.decimals),a.val=String(n),void a.refreshModels(a.val,a.initminute);a.infinity&&(a.showInfinity&&(n=a.max),a.showInfinity=!1),a.val=n,a.showInfinity?a.refreshModels(null,null,a.showInfinity):a.refreshModels(a.val,a.initminute,a.showInfinity)}else{p=a.initminute;var n=parseFloat(parseFloat(Number(a.initminute))-parseFloat(a.step)).toFixed(a.decimals);if(n<parseInt(a.min2))return a.val=parseFloat(Number(a.val)),a.val>0&&a.minuteTransition?(n=a.max2,a.initminute=n,a.val--):(n=parseFloat(a.min2).toFixed(a.decimals),a.initminute=n),void a.refreshModels(a.val,a.initminute);n==parseInt(a.min2)&&a.minuteTransition&&0==a.val&&(n="1"),a.initminute=n,a.showInfinity?a.refreshModels(null,null,!0):a.refreshModels(a.val,a.initminute,a.showInfinity)}},a.increment=function(){if("hours"==a.view){p=a.val;var n=parseFloat(parseFloat(Number(a.val))+parseFloat(a.step)).toFixed(a.decimals);if(0!==n&&(a.min2=parseInt(v)),n>parseInt(a.max))return void(a.infinity&&(a.showInfinity=!0,a.refreshModels(null,null,!0)));a.infinity&&(a.showInfinity=!1),a.val=n,a.showInfinity?a.refreshModels(null,null,!0):a.refreshModels(a.val,a.initminute,a.showInfinity)}if("minutes"==a.view){f=a.initminute;var n=parseFloat(parseFloat(Number(a.initminute))+parseFloat(a.step)).toFixed(a.decimals);if(n>parseInt(a.max2)){if(!a.minuteTransition)return;a.val++,n="0"}a.initminute=n,a.refreshModels(a.val,a.initminute),a.onItemChange()}},a.startSpinUp=function(e){if(e){if(c)return;c=!0,n(function(){c=!1},a.swipeInterval)}a.checkValue(),a.increment(),m=Date.now(),a.stopSpin(),e||n(function(){u=i(function(){a.increment()},a.stepInterval)},a.stepIntervalDelay)},a.startSpinDown=function(e){if(e){if(c)return;c=!0,n(function(){c=!1},a.swipeInterval)}if(a.checkValue(),a.decrement(),m=Date.now(),!e){n(function(){u=i(function(){a.decrement()},a.stepInterval)},a.stepIntervalDelay)}},a.stopSpin=function(){Date.now()-m>a.stepIntervalDelay?(n.cancel(l),i.cancel(u)):n(function(){n.cancel(l),i.cancel(u)},a.stepIntervalDelay)},a.checkValue=function(){var n;"hours"==a.view?""===a.val||String(a.val).match(/^-?(?:\d+|\d*\.\d+)$/i)||(n=""!==p?parseFloat(p).toFixed(0):parseFloat(a.min).toFixed(a.decimals),a.val=n,a.refreshModels(a.val,a.val2)):""===a.initminute||a.initminute.match(/^-?(?:\d+|\d*\.\d+)$/i)||(n=""!==f?parseFloat(f).toFixed(a.decimals):parseFloat(a.min).toFixed(a.decimals),a.initminute=n,a.refreshModels(a.val,a.initminute))},a.refreshModels=function(n,i,e){var t={hours:n,minutes:i,isInfinite:e};o.$setViewValue(t),o.$render(),a.onItemChange()}},template:'<div class="incrementer"><div class="row incrementer-row"><a class="button button-icon minus" on-touch="startSpinDown()" on-release="stopSpin()">-</a><span class="prefix" ng-show="prefix" ng-bind="prefix"></span><div class="input-container {{view}}" on-drag-right="startSpinUp(true)" on-drag-left="startSpinDown(true)" on-release="stopSpin(true)"><div class="hour-container" ng-click="toggleView(&quot;hours&quot)"><span ng-model="val" class="incrementer-value" ng-blur="checkValue()"><span ng-if=showInfinity><img ng-src="{{imgpath}}" /></span><span ng-if=!showInfinity>{{val}}</span><span ng-if=!showInfinity class="postfix" ng-show="postfix" ng-bind="postfix"></span></div><div ng-if=!showInfinity class="minute-container" ng-click="toggleView(&quot;minutes&quot)"><span ng-model="initminute" class="incrementer-value" ng-blur="checkValue()">{{initminute}}</span><span class="postfix" ng-show="postfix2" ng-bind="postfix2"></span></div></div><a class="button button-icon plus" on-touch="startSpinUp()" on-release="stopSpin()">+</a></div></div>'}}]);